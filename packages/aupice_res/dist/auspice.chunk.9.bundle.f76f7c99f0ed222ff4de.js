(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1171:function(t,e,r){"use strict";r.r(e);var n=r(1),o=r.n(n),i=r(860),a=r(797),c=r(899),l=r(827),s=(a.c.div.withConfig({displayName:"styles__IntroParagraph",componentId:"sc-dfonix-0"})(["max-width:60%;padding-top:20px;margin:auto;font-size:16px;"]),function(t){return t&&t.startsWith("Error")?"#e31a1c":t&&t.startsWith("Warning")?"#fd8d3c":"inProgress"===t?"#41b6c4":"success"===t?"#41ab5d":"notAttempted"===t?"#bdbdbd":"internalError"===t?"#8c6bb1":""}),u=Object(a.c)(l.h).withConfig({displayName:"styles__FileIcon",componentId:"sc-dfonix-1"})(["fill:",";"],(function(t){return t.dragActive?"rgba(255, 255, 255, 0)":"#41ab5d"})),f=a.c.div.withConfig({displayName:"styles__FilePickerContainer",componentId:"sc-dfonix-2"})(["display:flex;flex-direction:column;max-width:50%;margin:auto;margin-top:40px;& h4{margin:20px;}"]),d=a.c.div.withConfig({displayName:"styles__FilePickerHeader",componentId:"sc-dfonix-3"})(["display:flex;margin-bottom:0;padding-bottom:0;font-size:24px;font-weight:300;"]),h=a.c.div.withConfig({displayName:"styles__DraggedText",componentId:"sc-dfonix-4"})(["display:flex;flex-direction:column;font-size:20px;margin-left:20px;"]),p=a.c.div.withConfig({displayName:"styles__FilePickerBody",componentId:"sc-dfonix-5"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;width:100%;min-height:20vw;min-height:200px;border-radius:5px;border:4px dashed rgba(173,181,189,0.75);color:rgb(73,80,87);background-color:",";box-shadow:none;& *{pointer-events:none;}"],(function(t){return t.dragActive?"#d9f0a3":"rgba(255, 255, 255, 0)"})),m=(a.c.div.withConfig({displayName:"styles__DropContainerOuter",componentId:"sc-dfonix-6"})(["max-width:50%;margin:auto;margin-top:40px;background-color:#fff7bc;width:50%;height:150px;display:flex;flex-direction:column;justify-content:space-evenly;"]),a.c.div.withConfig({displayName:"styles__DropContainerInner",componentId:"sc-dfonix-7"})(["text-align:center;font-size:24px;color:#fc4e2a;"]),a.c.div.withConfig({displayName:"styles__ErrorContainer",componentId:"sc-dfonix-8"})(["max-width:50%;margin:auto;margin-top:40px;background-color:#fc4e2a;color:white;text-align:center;font-size:24px;"])),y=Object(a.c)(c.a).withConfig({displayName:"styles__HoverBox",componentId:"sc-dfonix-9"})(["max-width:40vh;white-space:normal;line-height:1.2;padding:21px !important;& > br{margin-bottom:10px;}"]),v=a.c.div.withConfig({displayName:"styles__IntroOuter",componentId:"sc-dfonix-10"})(["display:flex;flex-direction:row;justify-content:center;padding-top:50px;width:100%;"]),g=a.c.div.withConfig({displayName:"styles__IntroInner",componentId:"sc-dfonix-11"})(["text-align:center;max-width:800px;font-size:18px;font-weight:300;line-height:2.5rem;color:#737373;& > em{font-weight:400;font-style:normal;}& > br{margin-bottom:15px;}"]),b=function(t){var e=t.children;return o.a.createElement(v,null,o.a.createElement(g,null,e))},w=a.c.div.withConfig({displayName:"styles__ExperimentalBanner",componentId:"sc-dfonix-12"})(["height:100px;background-color:#fd8d3c;color:white;font-size:24px;font-weight:300;display:flex;flex-direction:column;justify-content:center;text-align:center;padding:10px 80px;& a{color:inherit;}& a:hover{color:inherit;}"]),x=a.c.div.withConfig({displayName:"styles__GridContainer",componentId:"sc-dfonix-13"})(["margin:auto;margin-top:20px;margin-bottom:10px;display:grid;grid-template-columns:3fr 2fr;gap:40px 20px;font-size:16px;max-width:800px;border:1px solid rgba(173,181,189,0.75);padding:10px;"]),E=a.c.div.withConfig({displayName:"styles__SlideDescription",componentId:"sc-dfonix-14"})(["cursor:pointer;max-height:120px;overflow:hidden;"]),O=a.c.div.withConfig({displayName:"styles__SlideDatasetContainer",componentId:"sc-dfonix-15"})(["flex:1 0 30%;cursor:pointer;display:flex;flex-direction:column;flex-wrap:no-wrap;"]),j=a.c.div.withConfig({displayName:"styles__SlideDataset",componentId:"sc-dfonix-16"})([""]),_=a.c.div.withConfig({displayName:"styles__GridHeaderCell",componentId:"sc-dfonix-17"})(["font-size:18px;font-weight:600;"]),S=function(t){var e,r=t.num,n=t.status,i=t.datasetType,a=t.hoverContent,c=t.width,l=void 0===c?40:c,u="hover_".concat(r,"_").concat(i);if("main"===i)e=o.a.createElement("g",{id:"Group",stroke:"none",strokeWidth:"2",fill:"none",fillRule:"evenodd",transform:"scale(0.27 0.32) translate(5 5)"},o.a.createElement("polyline",{id:"Path-3",stroke:"white",points:"2.94117647 12.8571429 2.94117647 18.6083984 17.8459616 18.6083984 17.8459616 16.0260882 24.870031 16.0260882"}),o.a.createElement("polyline",{id:"Path-4",stroke:"white",points:"17.8500004 18.5714286 17.8500004 20 25.0119374 20"}),o.a.createElement("polyline",{id:"Path-5",stroke:"white",points:"2.94117647 12.8571429 3.00303284 7.21191058 10.2360102 7.11220045 10.4159559 2.99881623 17.1561911 2.93803403 17.1561911 0 24.313534 0"}),o.a.createElement("polyline",{id:"Path-6",stroke:"white",points:"17.1599998 2.85714286 17.1599998 4.28571429 24.512941 4.28571429"}),o.a.createElement("path",{d:"M0,12.8571429 L2.94117647,12.8571429",id:"Path-6",stroke:"white"}),o.a.createElement("polyline",{id:"Path-7",stroke:"white",points:"10.2941176 7.14285714 10.2941176 11.4285714 24.5454676 11.4285714"}));else if("rootSeq"===i)e=o.a.createElement("g",null,o.a.createElement("text",{x:"2",y:"4.5",fontSize:"4px",fill:"white"},"A T"),o.a.createElement("text",{x:"2",y:"8.5",fontSize:"4px",fill:"white"},"C G"));else{if("frequencies"!==i)return console.error("Unknown datasetType ".concat(i)),null;e=o.a.createElement("g",null,o.a.createElement("mask",{id:"mask-2",fill:"white"},o.a.createElement("circle",{id:"path-1",cx:"5",cy:"5",r:"5"})),o.a.createElement("g",{mask:"url(#mask-2)",fill:"#FFFFFF",fillOpacity:"0.33"},o.a.createElement("g",{transform:"translate(-1.000000, 0.000000)"},o.a.createElement("path",{id:"middle_slice",d:"M4.52213324,3.60368881 C5.27922385,1.52902719 7.43852464,0.327797589 11.0000356,5.68434189e-14 L11.0000356,10.001328 L1,10.001328 L0.917926834,7.55792371 C2.54956115,7.03501049 3.75096328,5.71693219 4.52213324,3.60368881 Z"}),o.a.createElement("path",{id:"lower_slice",d:"M5.86327501,5.5 C7.18776688,3.72396 8.90002041,4.07834961 11.0000356,6.56316883 L11.0000356,10.001328 L1,10.001328 L1,7.71195799 C2.91769148,8.01335933 4.53878315,7.27604 5.86327501,5.5 Z"}))))}return o.a.createElement("div",{style:{paddingLeft:"5px"}},o.a.createElement("svg",{width:l,height:l,viewBox:"0 0 10 10 ","data-tip":!0,"data-for":u},o.a.createElement("circle",{cx:"5",cy:"5",r:"5",fill:s(n)}),e),o.a.createElement(y,{place:"bottom",effect:"solid",id:u},a))},k=a.c.div.withConfig({displayName:"styles__ButtonContainer",componentId:"sc-dfonix-18"})(["display:flex;justify-content:center;"]),L=a.c.button.withConfig({displayName:"styles__Button",componentId:"sc-dfonix-19"})(["border:none;padding:5px 10px;background-color:#41b6c4;color:white;font-size:24px;border-radius:5px;"]),N=r(796),P=r(855),C=r(819),T=r(870);function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */A=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new _(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var m={};l(m,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(S([])));v&&v!==e&&r.call(v,i)&&(m=v);var g=p.prototype=d.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var l=u(t[o],t,i);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==I(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(l.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=E(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:h,configurable:!0}),h.displayName=l(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,l(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),l(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),l(g,c,"Generator"),l(g,i,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function D(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function F(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?D(Object(r),!0).forEach((function(e){q(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function q(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==I(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===I(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function G(t,e,r,n,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return void r(t)}c.done?e(l):Promise.resolve(l).then(n,o)}var z=function(t){var e=t.lines;return o.a.createElement("div",null,e.map((function(t){return o.a.createElement("p",{key:t},t)})))},H=function(t){return t&&t.startsWith("Error")||t&&t.startsWith("Warning")?t:"inProgress"===t?"This file is being fetched as we speak...":"success"===t?"Success! This file exists and has been fetched. Note that there may still be subtle errors with the data, so we still suggest previewing the slide to double check.":"notAttempted"===t?"Status: We haven't attempted to fetch this file, as we are either waiting on the main JSON or this file is not necessary.":"Oops, there has been some internal error here! Please consider letting us know about this."},R=function(t){var e=t.slide,r=t.name,n=t.statuses,i=t.showSlide,a=e.slideNumber;return o.a.createElement("div",null,o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",cursor:"pointer"},onClick:i},o.a.createElement(j,{"data-tip":!0,"data-for":"dataset_".concat(a,"_").concat(r)},r),o.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.a.createElement(S,{num:a,datasetType:"main",status:null==n?void 0:n.main,hoverContent:o.a.createElement(z,{lines:["The main dataset (auspice) JSON, which is necessary for this slide to display properly.",H(null==n?void 0:n.main)]})}),o.a.createElement(S,{num:a,datasetType:"rootSeq",status:null==n?void 0:n.rootSeq,hoverContent:o.a.createElement(z,{lines:["An optional (sidecar) JSON which defines the root sequence. This is only needed for certain use-cases and the absence of this file is relatively normal.",H(null==n?void 0:n.rootSeq)]})}),o.a.createElement(S,{num:a,datasetType:"frequencies",status:null==n?void 0:n.frequencies,hoverContent:o.a.createElement(z,{lines:["The frequencies JSON, which is only fetched when the dataset asks for the frequencies panel to be displayed.",H(null==n?void 0:n.frequencies)]})}))),o.a.createElement(y,{place:"bottom",effect:"solid",key:"hover_dataset_".concat(r),id:"dataset_".concat(a,"_").concat(r)},o.a.createElement(z,{lines:"success"===(null==n?void 0:n.main)?["This dataset looks like it has loaded OK","The query parameters (which control how the dataset is displayed) are ".concat(e.queryParams.toString()),"Click here to view this slide full screen in order to check how the slide will be displayed in a narrative"]:["This dataset does't appear to be available or loaded correctly (hover over icons to the right for more details)","You can still click here to load the narrative slide but errors are to be expected!"]})))},W=function(t){var e=t.slide,r=t.datasetResponses,n=t.showSlide,i=e.associatedDatasetNames,a=!!i[1];return o.a.createElement(O,null,a&&o.a.createElement("div",null,"Tanglegram"),o.a.createElement(R,{slide:e,key:i[0],name:i[0],statuses:r[i[0]]||{},showSlide:n}),a&&o.a.createElement(R,{slide:e,key:i[1],name:i[1],statuses:r[i[1]]||{},showSlide:n}))},M=function(t){var e=t.slide,r=t.n,n=t.onClick;return o.a.createElement(E,{onClick:n},o.a.createElement("div",{"data-tip":!0,"data-for":"hover_slide_".concat(r)},"Slide ".concat(r+1,": ").concat(function(t,e){try{return(new DOMParser).parseFromString(t,"text/html").querySelectorAll(e?"h2":"h1")[0].innerText}catch(t){return console.error("Error extracting title:",t.message),"Unknown slide title"}}(e.blockHTML,0===r))),o.a.createElement(y,{place:"bottom",effect:"solid",key:"hover_slide_".concat(r),id:"hover_slide_".concat(r)},o.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.blockHTML}})," "))},B=function(){return o.a.createElement(b,null,"The ",o.a.createElement("em",null,"slides")," column shows the title of each slide in the narrative. Hovering will show you a preview of how the markdown content will appear, while clicking clicking on the title will preview the entire narrative at that slide (you can click in the top-left of the narrative to return to this editor).",o.a.createElement("br",null),"The ",o.a.createElement("em",null,"datasets")," for each slide are shown to the right. Each dataset may comprise multiple JSON files, the status of each is shown by icons to the right (hover for more details of the status of individual files). Clicking will preview the entire narrative at that slide.")},J=function(t){var e=t.summary,r=t.datasetResponses,n=t.showNarrative;return o.a.createElement(o.a.Fragment,null,o.a.createElement(x,null,o.a.createElement(_,{key:"description"},"Slides"),o.a.createElement(_,{key:"dataset"},"Datasets (per slide)"),e.reduce((function(t,e){var i=parseInt(e.slideNumber,10);return t.push(o.a.createElement(M,{key:"slide_".concat(i),slide:e,n:i,onClick:function(){return n(i)}})),t.push(o.a.createElement(W,{key:"dataset_".concat(i),slide:e,datasetResponses:r,showSlide:function(){return n(i)}})),t}),[])))};var Y=function(t){var e=t.narrative,r=t.datasetResponses,i=t.setDisplayNarrative,a=Object(N.c)(),c=Object(n.useRef)(null);Object(n.useEffect)((function(){c.current.scrollIntoView()}),[c]);var l=e.blocks.map((function(t,e){return{blockHTML:t.__html,associatedDatasetNames:Object(P.a)(t.dataset),queryParams:new URLSearchParams(t.query),slideNumber:String(e)}})),s=function(){var t,r=(t=A().mark((function t(){var r,n,o,c=arguments;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=c.length>0&&void 0!==c[0]?c[0]:0,n=l[r].associatedDatasetNames,t.prev=2,t.t0=F,t.t1={type:C.z,pathnameShouldBe:void 0,preserveCache:!0},t.t2=T.a,t.next=8,e.datasets[n[0]].main;case 8:if(t.t3=t.sent,!n[1]){t.next=15;break}return t.next=12,e.datasets[n[1]].main;case 12:t.t4=t.sent,t.next=16;break;case 15:t.t4=void 0;case 16:t.t5=t.t4,t.t6=r?{n:r}:{},t.t7=e.blocks,t.t8=e.datasets[e.initialNames[0]].pathname,t.t9=n[1]||null,t.t10=a,t.t11={json:t.t3,secondTreeDataset:t.t5,query:t.t6,narrativeBlocks:t.t7,mainTreeName:t.t8,secondTreeName:t.t9,dispatch:t.t10},t.t12=(0,t.t2)(t.t11),o=(0,t.t0)(t.t1,t.t12),t.next=31;break;case 27:return t.prev=27,t.t13=t.catch(2),console.error("Failed to load the narrative on slide ".concat(r),t.t13),t.abrupt("return");case 31:a(o),i(!0),e.datasets[n[0]].loadSidecars(a);case 34:case"end":return t.stop()}}),t,null,[[2,27]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){G(i,n,o,a,c,"next",t)}function c(t){G(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return o.a.createElement("div",{ref:c},o.a.createElement(B,null),o.a.createElement(J,{summary:l,datasetResponses:r,showNarrative:s}),o.a.createElement(k,null,o.a.createElement(L,{onClick:function(){return s()}},"View Narrative")),o.a.createElement("div",{style:{minHeight:"50px"}}))};function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */V=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new _(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var m={};l(m,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(S([])));v&&v!==e&&r.call(v,i)&&(m=v);var g=p.prototype=d.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var l=u(t[o],t,i);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==U(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(l.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=E(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:h,configurable:!0}),h.displayName=l(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,l(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),l(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),l(g,c,"Generator"),l(g,i,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function $(t,e,r,n,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return void r(t)}c.done?e(l):Promise.resolve(l).then(n,o)}function Z(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){$(i,n,o,a,c,"next",t)}function c(t){$(i,n,o,a,c,"throw",t)}a(void 0)}))}}function K(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?K(Object(r),!0).forEach((function(e){X(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function X(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==U(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===U(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return et(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return et(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rt(t,e,r){return nt.apply(this,arguments)}function nt(){return(nt=Z(V().mark((function t(e,r,n){return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({name:e,datasetType:"main",status:"inProgress"}),r.fetchMain(),t.prev=2,t.next=5,r.main;case 5:n({name:e,datasetType:"main",status:"success"}),t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(2),console.error("\tMainFetch has failed for ".concat(e," and so sidecars will not be requested")),n({name:e,datasetType:"main",status:"Error: ".concat(t.t0.message)}),t.abrupt("return");case 13:return t.prev=13,t.next=16,r.fetchSidecars();case 16:n({name:e,datasetType:"rootSeq",status:"inProgress"}),r.rootSequence.then((function(t){n(t?{name:e,datasetType:"rootSeq",status:"success"}:{name:e,datasetType:"rootSeq",status:"Warning - could not fetch the root sequence sidecar file. This is not necessarily a problem!"})})),r.tipFrequencies&&(n({name:e,datasetType:"frequencies",status:"inProgress"}),r.tipFrequencies.then((function(t){n(t?{name:e,datasetType:"frequencies",status:"success"}:{name:e,datasetType:"frequencies",status:"Error - the dataset requested a tipFrequencies sidecar but the fetch failed"})}))),t.next=24;break;case 21:t.prev=21,t.t1=t.catch(13),console.error("Programming error within fetchDatasetAndSidecars",t.t1);case 24:case"end":return t.stop()}}),t,null,[[2,8],[13,21]])})))).apply(this,arguments)}var ot=r(947),it=r(903);function at(t){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ct(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ct=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new _(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var m={};l(m,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(S([])));v&&v!==e&&r.call(v,i)&&(m=v);var g=p.prototype=d.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var l=u(t[o],t,i);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==at(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(l.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=E(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:h,configurable:!0}),h.displayName=l(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,l(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),l(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),l(g,c,"Generator"),l(g,i,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function lt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=dt(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function st(t,e,r,n,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return void r(t)}c.done?e(l):Promise.resolve(l).then(n,o)}function ut(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){st(i,n,o,a,c,"next",t)}function c(t){st(i,n,o,a,c,"throw",t)}a(void 0)}))}}function ft(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||dt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(t,e){if(t){if("string"==typeof t)return ht(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ht(t,e):void 0}}function ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var pt=function(t){var e=t.fileName,r=t.setNarrative,i=t.setError,a=Object(n.useRef)(null),c=ft(Object(n.useState)(!1),2),l=c[0],s=c[1];return Object(n.useEffect)((function(){function t(t){return e.apply(this,arguments)}function e(){return(e=ut(ct().mark((function t(e){var n,o,a,c,l,u,f,d,h,p,m;return ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),s(!1),i(null),r(void 0),o=lt(e.dataTransfer.files),t.prev=5,o.s();case 7:if((a=o.n()).done){t.next=14;break}if(!(c=a.value).name.endsWith(".md")){t.next=12;break}return n=c,t.abrupt("break",14);case 12:t.next=7;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),o.e(t.t0);case 19:return t.prev=19,o.f(),t.finish(19);case 22:if(n){t.next=25;break}return i("No appropriate markdown file dragged on"),t.abrupt("return");case 25:return l={},t.prev=26,t.t1=ot.parseMarkdownNarrativeFile,t.next=30,mt(n,!1);case 30:return t.t2=t.sent,t.t3=it.a,t.next=34,(0,t.t1)(t.t2,t.t3);case 34:u=t.sent,f=Object(P.d)(u,{}),d=f.datasets,h=f.initialNames,p=f.frontmatterNames,l={blocks:u,datasets:d,initialNames:h,frontmatterNames:p,fileName:n.name},t.next=45;break;case 39:return t.prev=39,t.t4=t.catch(26),m="Error obtaining narratives from ".concat(n.name,". Details: ").concat(t.t4.message),console.error(m),i(m),t.abrupt("return");case 45:l.datasets,r(l);case 47:case"end":return t.stop()}}),t,null,[[5,16,19,22],[26,39]])})))).apply(this,arguments)}function n(t){t.preventDefault()}function o(){s(!0)}function c(){s(!1)}var l=a.current;return l.addEventListener("dragover",n,!1),l.addEventListener("drop",t,!1),l.addEventListener("dragenter",o,!1),l.addEventListener("dragleave",c,!1),function(){l.removeEventListener("dragover",n,!1),l.removeEventListener("drop",t,!1),l.removeEventListener("dragenter",o,!1),l.removeEventListener("dragleave",c,!1)}}),[r,i,l,s]),o.a.createElement(f,{ref:a},o.a.createElement(d,null,o.a.createElement("h4",null,"Provide a narrative to analyse")),o.a.createElement(p,{dragActive:l},o.a.createElement(u,{size:70})," ",e?o.a.createElement(h,null,o.a.createElement("p",null,"Currently analysing ".concat(e)),o.a.createElement("p",null,"Drag & Drop another markdown file to restart")):o.a.createElement(h,null,"Drag & Drop markdown file to begin")))};function mt(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(r,n){var o=new window.FileReader;o.onloadend=function(t){if(e){var n=JSON.parse(t.target.result);r(n)}else r(t.target.result)},o.onerror=function(t){n(t)},o.readAsText(t)}))}var yt,vt=r(881);function gt(t){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==gt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===gt(i)?i:String(i)),n)}var o,i}function xt(t,e){return(xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=jt(t);if(e){var o=jt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ot(this,r)}}function Ot(t,e){if(e&&("object"===gt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function jt(t){return(jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _t=a.c.div.withConfig({displayName:"NarrativeViewHeader__OuterContainer",componentId:"sc-16ass9j-0"})(["min-height:50px;background-color:#fd8d3c;color:white;font-size:24px;position:absolute;display:flex;flex-direction:column;justify-content:center;z-index:100;top:0;width:",";max-width:",";overflow-y:auto;overflow-x:hidden;"],(function(t){return t.width+"px"}),(function(t){return t.width+"px"})),St=a.c.div.withConfig({displayName:"NarrativeViewHeader__InnerContainer",componentId:"sc-16ass9j-1"})(["text-align:center;cursor:pointer;"]),kt=Object(N.b)((function(t){return{displayNarrative:t.narrative.display,browserDimensions:t.browserDimensions.browserDimensions}}))(yt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xt(t,e)}(a,t);var e,r,n,i=Et(a);function a(){return bt(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"render",value:function(){var t=this,e=Object(vt.b)(this.props.browserDimensions,this.props.displayNarrative,!0,!1).sidebarWidth;return o.a.createElement(_t,{width:e},o.a.createElement(St,{style:{cursor:"pointer"},onClick:function(){return t.props.setDisplayNarrative(!1)}},"Return to debugging window"))}}])&&wt(e.prototype,r),n&&wt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.a.Component))||yt;function Lt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Nt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Pt=Object(n.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(8)]).then(r.bind(null,1144))})),Ct=function(){return o.a.createElement(b,null,"This page provides an interactive approach to testing and debugging ",o.a.createElement("a",{href:"https://docs.nextstrain.org/en/latest/guides/communicate/narratives-intro.html"},"Nextstrain Narratives"),". Simply drag & drop your narrative (markdown file) below to see a summary of each slide and the associated\n    datasets, with the ability to preview individual slides or the entire narrative. Please see the ",o.a.createElement("a",{href:"https://docs.nextstrain.org/en/latest/tutorials/narratives-how-to-write.html"},"associated tutorial")," for more.")};e.default=function(){var t=Lt(Object(n.useState)(),2),e=t[0],r=t[1],a=Lt(Object(n.useState)(null),2),c=a[0],l=a[1],s=Lt(Object(n.useState)(),2),u=s[0],f=s[1],d=function(t){var e=Object(N.c)(),r=tt(Object(n.useReducer)((function(t,e){if(e.reset)return{};var r=Q({},t);return r[e.name]||(r[e.name]={main:"notAttempted",rootSeq:"notAttempted",frequencies:"notAttempted"}),r[e.name]=Q({},r[e.name]),r[e.name][e.datasetType]=e.status,r}),{}),2),o=r[0],i=r[1],a=Object(n.useRef)(Object.keys(t||{}));return Object(n.useEffect)((function(){var r=Object.keys(t||{});if(JSON.stringify(r)!==JSON.stringify(a.current)){i({reset:!0}),a.current=r;for(var n=0,c=Object.keys(t||{});n<c.length;n++){var l=c[n];o[l]&&"notAttempted"!==o[l].main||rt(l,t[l],i)}e({type:C.f,jsons:t})}}),[e,i,t,o,a]),o}(null==e?void 0:e.datasets);return u?o.a.createElement(o.a.Fragment,null,o.a.createElement(kt,{setDisplayNarrative:f}),o.a.createElement(Pt,null)):o.a.createElement(o.a.Fragment,null,o.a.createElement(i.a,null),o.a.createElement(w,null,o.a.createElement("span",null,"This narrative debugger is a beta release!",o.a.createElement("br",null),"If you discover issues or have suggestions\n          please get in touch or make issue on ",o.a.createElement("a",{href:"https://github.com/nextstrain/auspice/issues"},"GitHub"))),o.a.createElement(Ct,null),o.a.createElement(pt,{fileName:null==e?void 0:e.fileName,setNarrative:r,setError:l}),null!==c&&o.a.createElement(m,null,"".concat(c)),e&&o.a.createElement(Y,{narrative:e,datasetResponses:d,setDisplayNarrative:f}))}},859:function(t,e,r){t.exports=r.p+"1ffc23cfee00e9e13194f13f3a7ce418.svg"},860:function(t,e,r){"use strict";var n=r(1),o=r.n(n),i=r(797),a=r(818),c=r(827),l=function(t){var e=t.navHeight,r=t.navWidth,n=t.display,i=t.onClick,a={position:"fixed",left:r?r-12:-12,visibility:n?"visible":"hidden",width:n?12:0,top:e/2-8,backgroundColor:"inherit",boxShadow:"none",cursor:"pointer",borderRadius:"0px",fontSize:12,color:"#444",textAlign:"center",verticalAlign:"middle"};return o.a.createElement("div",{style:a,onClick:i},o.a.createElement(c.d,null))},s=r(859),u=i.c.div.withConfig({displayName:"content__AuspiceNavBarContainer",componentId:"sc-jg0fvy-0"})(["display:flex;flex-direction:row;align-items:center;justify-content:center;height:100%;"]),f=i.c.a.withConfig({displayName:"content__Title",componentId:"sc-jg0fvy-1"})(["padding:0px;text-decoration:none;color:",";font-size:20px;font-weight:400;cursor:pointer;letter-spacing:1rem;"],(function(t){return t.theme.color})),d=i.c.a.withConfig({displayName:"content__LogoLink",componentId:"sc-jg0fvy-2"})(["padding:5px 5px;width:50px;cursor:pointer;"]),h=i.c.div.withConfig({displayName:"content__NarrativeTitle",componentId:"sc-jg0fvy-3"})(["white-space:nowrap;font-size:1.7rem;margin-left:auto;padding:0px 12px;float:right;color:",";max-width:","px;overflow:hidden;text-overflow:ellipsis;"],(function(t){return t.theme.color}),(function(t){return t.width-90})),p=r(836),m=i.c.div.withConfig({displayName:"navBar__NavBarContainer",componentId:"sc-ygpsg-0"})(["left:0;max-width:960px;margin-top:auto;margin-right:auto;margin-bottom:auto;margin-left:auto;height:","px;justify-content:space-between;align-items:center;overflow:hidden;z-index:100;transition:left .3s ease-out;"],(function(t){return t.narrative?a.H:a.I})),y=Object(p.b)("navbarComponent")?Object(p.a)("navbarComponent"):function(t){var e=t.narrativeTitle,r=t.sidebar,n=t.width;return r?o.a.createElement(u,null,o.a.createElement("div",{style:{flex:1}}),o.a.createElement(d,{href:"/"},o.a.createElement("img",{alt:"splashPage",width:"40px",src:s})),o.a.createElement("div",{style:{flex:1}}),function(t,e){return t?o.a.createElement(h,{width:e,href:"/"},t):o.a.createElement(f,{href:"/"},"auspice")}(e,n),o.a.createElement("div",{style:{flex:1}})):null};e.a=function(t){var e=t.sidebar,r=t.toggleHandler,n=t.narrativeTitle,i=t.width,c=e&&!n;return o.a.createElement(m,null,o.a.createElement(y,{narrativeTitle:n,sidebar:e,width:i}),o.a.createElement(l,{navHeight:a.I,navWidth:i,display:c,onClick:r}))}},868:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return o}));var n=function(t,e){return e*(t-(1===e?40:100))},o=function(t){var e=t.horizontal,r=t.vertical,n=t.availableWidth,o=t.availableHeight,i=t.minHeight,a=void 0===i?void 0:i,c=t.maxAspectRatio,l=void 0===c?void 0:c,s=e*(n-(1===e?40:100)),u=r*o-52;return l&&u>l*s&&(u=l*s),a&&u<a&&(u=a),{width:s,height:u}}},881:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return a}));var n=r(868),o=r(818),i=function(t,e,r,o){var i=.36,a=.88,c=.64;if(e){var l=!0+t.includes("entropy")+t.includes("frequencies")-1;0===l?(a=1,c=1):1===l?(a=.7,c=.7,i=.3):(a=.5,c=.5,i=.25)}return{full:Object(n.b)({horizontal:1,vertical:a,availableWidth:r,availableHeight:o}),grid:Object(n.b)({horizontal:.5,vertical:c,availableWidth:r,availableHeight:o}),chart:Object(n.b)({horizontal:1,vertical:i,availableWidth:r,availableHeight:o,minHeight:150})}},a=function(t,e,r,n){var i,a=t.width,c=t.height,l=(i=a,e?i>1500?500:i>1e3?400:310:o.l+o.k),s=r?l:0;return n||(a-=s),{overlayStyles:{position:"absolute",top:0,bottom:0,right:0,display:"block",width:a,height:c,left:r?s:0,opacity:r?1:0,visibility:r?"visible":"hidden",zIndex:8e3,backgroundColor:"rgba(0,0,0,0.5)",cursor:"pointer",overflow:"scroll",transition:r?"visibility 0s ease-out, left 0.3s ease-out, opacity 0.3s ease-out":"left 0.3s ease-out, opacity 0.3s ease-out, visibility 0s ease-out 0.3s"},availableWidth:a,availableHeight:c,sidebarWidth:l}}}}]);